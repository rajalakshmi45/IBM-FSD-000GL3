<!DOCTYPE html>
<head> 
    <title>Cart Page</title>
    <script>
        const getCart = ()=>{
            const _url = 'http://localhost:1567/cart';
            fetch(_url,{})
            .then(res=>res.json())
            .then(cart=>{
                createTable(cart);
            })
        }
        const createTable = (data)=>{
            let rows = '';
            data.cart.forEach(u => {
                total = u.price * u.quantity;
                rows += `<tr>
                            <td>${u.name}</td>
                            <td>${u.price}</td>
                            <td>${u.quantity}</td>
                            <td>${total}</td>
                        </tr>`
            });
            const _table = `<table>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Total</th>
                                </tr>
                                ${rows}
                            </table>`;
            
            
            document.getElementById('cart_div').innerHTML = _table;
        }

        const sendmail = () =>{
            document.location('buy.html')
        }
    </script>
</head>
<body onload="getCart()">
    <div id="cart_div">

    </div>
    <div id="total">

    </div>
    <div>
        <a href="buy.html"><img src="email.png" height="50" width="50"></img></a>
    </div>
</body>
</html>
